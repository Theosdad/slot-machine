const reel1=document.getElementById("reel1"),reel2=document.getElementById("reel2"),reel3=document.getElementById("reel3"),reel4=document.getElementById("reel4"),reel5=document.getElementById("reel5"),reel6=document.getElementById("reel6"),reel7=document.getElementById("reel7"),reel8=document.getElementById("reel8"),reel9=document.getElementById("reel9"),spinButton=document.getElementById("spin"),autoButton=document.getElementById("auto"),scoreDisplay=document.getElementById("score"),winSlogan=document.getElementById("win"),winScore=document.getElementById("win-score"),betDisplay=document.getElementById("bet"),increaseBet=document.getElementById("bet-increase"),decreaseBet=document.getElementById("bet-decrease"),starsAmount=document.getElementById("stars-amount");let score=1e6,bet=100;betDisplay.textContent=bet;let spinning=!1,autoSpinning=!1;const reelElements=[],populateReelElements=()=>{document.querySelectorAll(".reel").forEach((e=>{const t=e.querySelectorAll(".symbol"),n=[];t.forEach((e=>{const t=e.getAttribute("data-image"),r=e.getAttribute("data-image2x"),o=e.getAttribute("data-width"),s=e.getAttribute("data-height");n.push({image:t,image2x:r,width:o,height:s})})),reelElements.push(n)}))},getRandomElement=e=>{const t=Array.from(e.parentElement.children).indexOf(e),n=reelElements[t],r=Math.floor(Math.random()*n.length);return`<img src="${n[r].image}" srcset="${n[r].image2x} 2x" alt="Symbol ${r+1}" width="${n[r].width}" height="${n[r].height}">`},spin=()=>{if(spinning||score<bet)return;spinning=!0,score-=bet,scoreDisplay.textContent=`${score}`;const e=Math.min(100,9e3-parseFloat(starsAmount.textContent));starsAmount.textContent=parseFloat(starsAmount.textContent)+e;for(let e=0;e<5;e++)setTimeout((()=>{reel1.innerHTML="",reel2.innerHTML="",reel3.innerHTML="",reel4.innerHTML="",reel5.innerHTML="",reel6.innerHTML="",reel7.innerHTML="",reel8.innerHTML="",reel9.innerHTML="",reel1.innerHTML=getRandomElement(reel1),reel2.innerHTML=getRandomElement(reel2),reel3.innerHTML=getRandomElement(reel3),reel4.innerHTML=getRandomElement(reel4),reel5.innerHTML=getRandomElement(reel5),reel6.innerHTML=getRandomElement(reel6),reel7.innerHTML=getRandomElement(reel7),reel8.innerHTML=getRandomElement(reel8),reel9.innerHTML=getRandomElement(reel9),4===e&&(checkWin(),spinning=!1,saveResultsToSession())}),200*e)},checkForSymbol=e=>{const t=e.querySelector("img");return t?t.getAttribute("src"):null},checkWin=()=>{const e=reel4.querySelector("img").getAttribute("src"),t=reel5.querySelector("img").getAttribute("src"),n=reel6.querySelector("img").getAttribute("src");if(e===t&&t===n){const e=5*bet;score+=e,scoreDisplay.textContent=`${score}`,showWinMessage(e)}else showWinMessage(0)},showWinMessage=e=>{const t=e>0?`${e}`:"";document.querySelector(".win").style.display=e>0?"block":"none",document.getElementById("win").textContent=e>0?"WIN":"",document.getElementById("win-score").textContent=t};spinButton.addEventListener("click",(()=>{!spinning&&score>=bet&&spin()}));const autoSpin=()=>{score>=bet&&autoSpinning?(spin(),setTimeout(autoSpin,2e3)):autoSpinning=!1};function saveResultsToSession(){sessionStorage.setItem("score",score),sessionStorage.setItem("starsAmount",starsAmount.textContent)}function loadResultsFromSession(){const e=sessionStorage.getItem("score"),t=sessionStorage.getItem("starsAmount");null!==e&&(score=parseFloat(e),scoreDisplay.textContent=`${score}`),null!==t&&(starsAmount.textContent=parseFloat(t))}autoButton.addEventListener("click",(()=>{spinning?autoSpinning=!1:(autoSpinning=!autoSpinning,autoSpinning&&autoSpin())})),increaseBet.addEventListener("click",(()=>{if(!spinning&&bet<score){const e=bet+100;e<=score&&(bet=e,betDisplay.textContent=bet)}})),decreaseBet.addEventListener("click",(()=>{if(!spinning&&bet>100){const e=bet-100;e>=100&&(bet=e,betDisplay.textContent=bet)}})),loadResultsFromSession(),document.querySelectorAll(".reel").forEach((e=>{const t=e.querySelectorAll(".symbol"),n=[];t.forEach((e=>{const t=e.getAttribute("data-image"),r=e.getAttribute("data-image2x"),o=e.getAttribute("data-width"),s=e.getAttribute("data-height");n.push({image:t,image2x:r,width:o,height:s})})),reelElements.push(n)}));